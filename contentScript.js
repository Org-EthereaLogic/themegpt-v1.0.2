const CLASS_PREFIX='cgpt-theme--';function setThemeClass(name){const root=document.documentElement;Array.from(root.classList).filter(c=>c.startsWith(CLASS_PREFIX)).forEach(c=>root.classList.remove(c));if(name&&name!=='system'){root.classList.add(CLASS_PREFIX+name);}}function setFollowSystem(follow){const root=document.documentElement;if(follow)root.setAttribute('data-cgpt-follow-system','1');else root.removeAttribute('data-cgpt-follow-system');}function applyTheme(theme='system',follow=true){setThemeClass(theme);setFollowSystem(follow);console.info(`[ThemeGPT] theme=%s follow=%s`,theme,!!follow);}chrome.runtime.onMessage.addListener((msg)=>{if(msg?.type==='APPLY_THEME'){applyTheme(msg.theme,msg.follow);}});(async()=>{const {theme='system',follow=true}=await chrome.storage.sync.get(['theme','follow']);applyTheme(theme,follow);})();